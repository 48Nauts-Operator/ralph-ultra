{
  "project": "ralph-tui",
  "description": "Interactive Terminal UI dashboard for Ralph Ultra with split panels, slash commands, and real-time monitoring",
  "branchName": "feat/interactive-tui",
  "techStack": ["bash", "tmux", "jq"],
  "userStories": [
    {
      "id": "TUI-001",
      "title": "Create TUI entry point and tmux session management",
      "description": "Create ralph-tui.sh script that initializes a tmux session with the correct layout (left panel, right panel, input bar). Handle session creation, attachment, and cleanup.",
      "priority": 1,
      "complexity": "medium",
      "acceptanceCriteria": [
        "ralph-tui.sh script exists in scripts/ directory",
        "Running 'ralph-tui.sh /path/to/project' creates a tmux session named 'ralph-tui'",
        "Session has 3 panes: left (40%), right (60%), bottom input (3 lines)",
        "Graceful cleanup on exit (Ctrl+C or /quit)",
        "Re-running attaches to existing session if present",
        "Script validates project path has prd.json"
      ],
      "passes": true
    },
    {
      "id": "TUI-002",
      "title": "Implement left panel - PRD progress display",
      "description": "Create the left panel renderer that shows project info, story progress with status icons, current story indicator, and summary stats (ETA, cost).",
      "priority": 2,
      "complexity": "medium",
      "acceptanceCriteria": [
        "Left panel shows project name and branch from prd.json",
        "Stories displayed with status icons: [x] complete, [ ] pending, [>] in progress",
        "Current story highlighted with arrow indicator",
        "Shows X/Y completed count",
        "Shows ETA if timing data available",
        "Shows session cost if tracking data available",
        "Panel refreshes when prd.json changes",
        "Handles long story titles with truncation"
      ],
      "passes": true
    },
    {
      "id": "TUI-003",
      "title": "Implement right panel - live monitor view",
      "description": "Create the default right panel view that streams logs in real-time from ralph-monitor.log with proper formatting and auto-scroll.",
      "priority": 3,
      "complexity": "medium",
      "acceptanceCriteria": [
        "Right panel shows 'Live Monitor' header",
        "Streams content from logs/ralph-monitor.log in real-time",
        "Auto-scrolls to latest entries",
        "Timestamps formatted nicely [HH:MM:SS]",
        "Color coding: green for success, red for errors, yellow for warnings",
        "Shows 'Waiting for activity...' when log is empty",
        "Handles log file not existing gracefully"
      ],
      "passes": true
    },
    {
      "id": "TUI-004",
      "title": "Implement input bar and command processing",
      "description": "Create the bottom input bar that accepts slash commands, processes them, and dispatches to appropriate handlers.",
      "priority": 4,
      "complexity": "medium",
      "acceptanceCriteria": [
        "Input bar shows '> ' prompt",
        "User can type commands starting with /",
        "Enter key submits command",
        "Command history with up/down arrows (last 20 commands)",
        "Unknown commands show 'Unknown command. Type /help for list'",
        "Commands are case-insensitive",
        "Empty input (just Enter) is ignored"
      ],
      "passes": true
    },
    {
      "id": "TUI-005",
      "title": "Implement /help and /quit commands",
      "description": "Create the help overlay that shows all available commands, and the quit command for graceful exit.",
      "priority": 5,
      "complexity": "simple",
      "acceptanceCriteria": [
        "/help displays list of all commands with descriptions",
        "/h works as alias for /help",
        "Help displayed in right panel temporarily",
        "Press any key to dismiss help",
        "/quit exits TUI cleanly",
        "/q works as alias for /quit",
        "Quit kills tmux session and cleans up"
      ],
      "passes": true
    },
    {
      "id": "TUI-006",
      "title": "Implement /status command - system status panel",
      "description": "Create the status view that shows quota, hybrid routing, and timing database information when /status is entered.",
      "priority": 6,
      "complexity": "medium",
      "acceptanceCriteria": [
        "/status switches right panel to status view",
        "Shows Claude Pro quota (5-hour and 7-day utilization)",
        "Shows hybrid LLM configuration if enabled",
        "Shows timing database stats (total runs, accuracy)",
        "Data fetched from existing ralph-quota.sh, ralph-hybrid.sh, ralph-timing-db.sh",
        "/monitor switches back to live monitor view"
      ],
      "passes": true
    },
    {
      "id": "TUI-007",
      "title": "Implement /logs command - log file browser",
      "description": "Create the logs view that lists available log files and allows viewing them.",
      "priority": 7,
      "complexity": "medium",
      "acceptanceCriteria": [
        "/logs switches right panel to log browser",
        "Lists all .log files in logs/ directory",
        "Shows file size and modification time",
        "Files sorted by modification time (newest first)",
        "j/k keys navigate up/down the list",
        "Enter key opens selected log in pager (less)",
        "q returns to log browser, /monitor returns to live view"
      ],
      "passes": true
    },
    {
      "id": "TUI-008",
      "title": "Implement /run and /stop commands",
      "description": "Add ability to start and stop Ralph runs from within the TUI.",
      "priority": 8,
      "complexity": "medium",
      "acceptanceCriteria": [
        "/run starts ralph.sh on current project in background",
        "/run shows error if Ralph already running",
        "Running state indicated in status bar",
        "/stop sends SIGTERM to running Ralph process",
        "/stop shows error if Ralph not running",
        "Clean process management (no orphan processes)",
        "Monitor view automatically shows new log output"
      ],
      "passes": true
    },
    {
      "id": "TUI-009",
      "title": "Implement status bar with real-time indicators",
      "description": "Create the top status bar showing version, quota percentage, hybrid status, and running state.",
      "priority": 9,
      "complexity": "simple",
      "acceptanceCriteria": [
        "Status bar at top of screen",
        "Shows 'Ralph Ultra v1.5.0' on left",
        "Shows quota percentage with color coding (green <90%, yellow 90-97%, red >=98%)",
        "Shows 'Hybrid: ON/OFF' indicator",
        "Shows 'Running' or 'Idle' state",
        "Updates every 30 seconds",
        "Doesn't flicker during updates"
      ],
      "passes": false
    },
    {
      "id": "TUI-010",
      "title": "Implement /report command",
      "description": "Add command to generate HTML report and optionally open it.",
      "priority": 10,
      "complexity": "simple",
      "acceptanceCriteria": [
        "/report generates HTML report using ralph-monitor.sh --report",
        "Shows 'Generating report...' message",
        "Shows path to generated report",
        "/report --open generates and opens in default browser",
        "Error handling if report generation fails"
      ],
      "passes": false
    },
    {
      "id": "TUI-011",
      "title": "Add keyboard shortcuts",
      "description": "Implement keyboard shortcuts for common actions without needing slash commands.",
      "priority": 11,
      "complexity": "simple",
      "acceptanceCriteria": [
        "1 key switches to monitor view",
        "2 key switches to status view",
        "3 key switches to logs view",
        "? key shows help",
        "r key runs Ralph (same as /run)",
        "s key stops Ralph (same as /stop)",
        "Tab cycles through panel views",
        "Shortcuts work when input bar not focused"
      ],
      "passes": false
    },
    {
      "id": "TUI-012",
      "title": "Integrate TUI into ralph CLI",
      "description": "Add 'ralph tui' command to the unified CLI and update documentation.",
      "priority": 12,
      "complexity": "simple",
      "acceptanceCriteria": [
        "'ralph tui' launches the TUI for current directory",
        "'ralph tui /path' launches TUI for specified project",
        "'ralph tui --help' shows TUI-specific help",
        "bin/ralph updated with tui subcommand",
        "README.md updated with TUI documentation",
        "CHANGELOG.md updated for v1.5.0"
      ],
      "passes": false
    }
  ]
}
